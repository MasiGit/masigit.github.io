<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Stock Average Calculator</title>

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="lib/css/bootstrap4.6.1.min.css">
  
  <!-- Font Awesome Icons -->
  <link 
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css"
    integrity="sha512-OkD1nCn6dZzJtC6OGx0Gv82ZASVal8QXYeJl5Q2OWq+BW+2FYD44s06Idq0GvTY0gVaYM3Bh1qp0vMG2sT9lZdbi3Fw=="
    crossorigin="anonymous"
    referrerpolicy="no-referrer"
  />

  <!-- Common CSS -->
  <link rel="stylesheet" href="common.css">

  <!-- jQuery & Bootstrap JS -->
  <script src="lib/scripts/jquery.slim.min.js"></script>
  <script src="lib/scripts/bootstrap4.6.1.min.js"></script>

  <script>
    /****************************************
     * STOCK AVERAGE (Original)
     ****************************************/
    function calculateNewAverage(){
      const cost_price    = parseFloat(document.getElementById('cost_price').value);
      const quantity_held = parseFloat(document.getElementById('quantity_held').value);
      const market_price  = parseFloat(document.getElementById('market_price').value);
      const new_shares    = parseFloat(document.getElementById('new_shares').value);
      if (isNaN(cost_price)||isNaN(quantity_held)||isNaN(market_price)||isNaN(new_shares)){
        alert('Please provide valid input in Stock Average form.'); return;
      }
      const cost_value       = cost_price * quantity_held;
      const new_shares_value = market_price * new_shares;
      const total_cost       = cost_value + new_shares_value;
      const total_shares     = quantity_held + new_shares;
      const new_avg          = (total_cost/total_shares).toFixed(2);
      let html = '<table class="table table-striped">';
      html += `<tr><td>Cost Price</td><td>${cost_price}</td></tr>`;
      html += `<tr><td>Quantity Held</td><td>${quantity_held}</td></tr>`;
      html += `<tr><td>Market Price</td><td>${market_price}</td></tr>`;
      html += `<tr><td>New Shares</td><td>${new_shares}</td></tr>`;
      html += `<tr class=\"table-info\"><td>New Average Price</td><td><strong>${new_avg}</strong></td></tr>`;
      html += '</table>';
      document.getElementById('avg_output').innerHTML = html;
    }
    function clearFormStock(){
      ['cost_price','quantity_held','market_price','new_shares'].forEach(id=>document.getElementById(id).value='');
      document.getElementById('avg_output').innerHTML='';
    }
  </script>
</head>
<body>
<div class="container-fluid">
  <div class="row">
    <div class="col-12 col-md-3 col-lg-3">
      <div class="card mt-3">
        <div class="card-header main-header"><i class="fas fa-bars"></i> Menu</div>
        <ul class="list-group list-group-flush">
          <li class="list-group-item"><a href="gtm.html"><i class="fas fa-coins"></i> GTM</a></li>
          <li class="list-group-item active"><a href="stock-average.html" class="text-dark"><i class="fas fa-chart-line"></i> Stock Average</a></li>
          <li class="list-group-item"><a href="stock-average2.html"><i class="fas fa-calculator"></i> Stock Average 2</a></li>
          <li class="list-group-item"><a href="trade-calculator.html"><i class="fas fa-exchange-alt"></i> Trade Calculator</a></li>
          <li class="list-group-item"><a href="dividend.html"><i class="fas fa-chart-pie"></i> Dividends</a></li>
          <li class="list-group-item"><a href="index.html"><i class="fas fa-home"></i> Home</a></li>
        </ul>
      </div>
    </div>
    <div class="col-12 col-md-9 col-lg-9">
      <div class="section">
        <div class="card mt-3"><div class="card-header">Stock Average</div><div class="card-body">
          <div class="form-group"><label for="cost_price">Cost Price:</label><input class="form-control" id="cost_price"></div>
          <div class="form-group"><label for="quantity_held">Quantity Held:</label><input class="form-control" id="quantity_held"></div>
          <div class="form-group"><label for="market_price">Market Price:</label><input class="form-control" id="market_price"></div>
          <div class="form-group"><label for="new_shares">New Shares to Buy:</label><input class="form-control" id="new_shares"></div>
        </div><div class="card-footer">
          <button class="btn btn-primary" onclick="calculateNewAverage()">Submit</button>
          <button class="btn btn-secondary" onclick="clearFormStock()">Clear</button>
        </div></div>
        <div class="card mt-3"><div class="card-header">Stock Average Result</div><div class="card-body"><div id="avg_output"></div></div></div>
      </div>
    </div>
  </div>
</div>
</body>
</html>
